(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var a=t(17),c=t.n(a),r=t(18),s=t(8),o=t(3),u=t(1),i=t(0),l=function(e){return Object(i.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(i.jsxs)("div",{children:["name:",Object(i.jsx)("input",{value:e.newName,onChange:e.handleNameChange,type:"text"})]}),Object(i.jsxs)("div",{children:["number:",Object(i.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange,type:"text"})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.deletePerson;return Object(i.jsxs)("li",{className:"phoneBookEntry",children:[n.name," ",n.number,Object(i.jsx)("button",{onClick:function(){return t(n)},name:n.id,children:"delete"})]})},b=function(e){var n=e.persons,t=e.deletePerson;return Object(i.jsx)("ul",{children:n.map((function(e){return Object(i.jsx)(d,{person:e,deletePerson:t},e.id)}))})},h=function(e){return Object(i.jsxs)("div",{children:["Filter names with",Object(i.jsx)("input",{value:e.filter,onChange:e.handleFilterChange,type:"text"})]})},j=function(e){var n,t,a=e.userMessage;return n=a.message,t=a.className,null===n?null:Object(i.jsx)("div",{className:t,children:n})},m=t(5),f=t.n(m),p="/api/persons",O={getAll:function(){return f.a.get(p).then((function(e){return e.data}))},create:function(e){return f.a.post(p,e).then((function(e){return e.data}))},deleteFromDB:function(e,n){f.a.delete("".concat(p,"/").concat(e)).catch((function(e){console.log(e),n()}))},update:function(e){return f.a.put("".concat(p,"/").concat(e.id),e).then((function(e){return e.data}))}},g=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(u.useState)(""),d=Object(o.a)(c,2),m=d[0],f=d[1],p=Object(u.useState)(""),g=Object(o.a)(p,2),v=g[0],x=g[1],w=Object(u.useState)(""),N=Object(o.a)(w,2),y=N[0],C=N[1],S=Object(u.useState)({message:null,className:""}),k=Object(o.a)(S,2),A=k[0],F=k[1],M=function(){setTimeout((function(){F({message:null,className:""})}),3e3)};var P=t;return y&&(P=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(y.toLowerCase())}))),Object(u.useEffect)((function(){O.getAll().then((function(e){a(e)}))}),[]),Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{userMessage:A}),Object(i.jsx)(h,{filter:y,handleFilterChange:function(e){C(e.target.value)}}),Object(i.jsx)("h3",{children:"Add a new person to the phonebook"}),Object(i.jsx)(l,{handleSubmit:function(e){e.preventDefault();var n,c=v.trim();if(n=c,-1!==t.findIndex((function(e){return n===e.name}))){if(window.confirm("".concat(c," is already in the notebook. Do you want to replace the old number with the new one (").concat(m,")?"))){var r=function(e,n){var a=t.find((function(n){return n.name===e}));return Object(s.a)(Object(s.a)({},a),{},{number:n})}(c,m);O.update(r).then((function(e){a(t.map((function(n){return n.id!==e.id?n:e})))})),F({message:"Updated the number of ".concat(r.name," succesfully!"),className:"userMsg userAddedSuccess"}),M()}x(""),f("")}else{var o=t.length>0?parseInt(t[t.length-1].id)+1:1,u={name:c,number:m,id:o};O.create(u).then((function(e){a(t.concat(e)),x(""),f(""),F({message:"Added ".concat(e.name," succesfully!"),className:"userMsg userAddedSuccess"}),M()}))}},handleNameChange:function(e){x(e.target.value)},handleNumberChange:function(e){f(e.target.value)},newName:v,newNumber:m}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(b,{persons:P,deletePerson:function(e){if(window.confirm("Are you sure you want to delete ".concat(e.name,"?"))){O.deleteFromDB(e.id,(function(){return n=e.name,F({message:"Information of ".concat(n," was already removed from the server"),className:"userMsg deleteFailed"}),void M();var n}));var n=Object(r.a)(t);console.log("Value of state persons before splice:",n.length);for(var c=0;c<t.length;c++)t[c].id===e.id&&n.splice(c,1);a(n)}}})]})};t(42);c.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a6751449.chunk.js.map